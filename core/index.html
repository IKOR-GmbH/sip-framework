<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="IKOR" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Core - SIP Framework Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Core";
        var mkdocs_page_input_path = "core.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> SIP Framework Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Introduction</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../installation/">Installation Guide</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../archetype/">Archetype</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Core</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#description">Description</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#features">Features</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#actuator-health-check-and-metrics">Actuator health check and metrics</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#adapter-lifecycle-manipulation-in-runtime">Adapter lifecycle manipulation in runtime</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#logging-translation">Logging Translation</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#changing-log-level-programmatically">Changing log level programmatically</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#tracing">Tracing</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#openapi-descriptor">OpenAPI Descriptor</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#sip-details-in-actuator-info-endpoint">SIP Details in actuator info endpoint</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#exception-handling">Exception handling</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#declarative-structure-in-actuator-adapter-definition-endpoint">Declarative Structure in actuator adapter definition endpoint</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../declarative/">Declarative Structure</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../integration-starter/">Integration Starter</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../starter-parent/">Starter Parent</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../security/">Security</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../test-kit/">Test Kit</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../middle-component/">Middle Component</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../framework_version_upgrade/">Framework Version Upgrade</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../license/">License</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING/">Contribution Guidelines</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../CODE_OF_CONDUCT/">Code Of Conduct</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../changelog/">Changelog</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../javadoc/latest/index.html">JavaDoc Latest Development</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../javadoc/3.3.0/index.html">JavaDoc 3.3.0</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../javadoc/3.2.0/index.html">JavaDoc 3.2.0</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../javadoc/3.1.0/index.html">JavaDoc 3.1.0</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../javadoc/3.0.0/index.html">JavaDoc 3.0.0</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../javadoc/2.4.0/index.html">JavaDoc 2.4.0</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../javadoc/2.3.0/index.html">JavaDoc 2.3.0</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../javadoc/2.2.0/index.html">JavaDoc 2.2.0</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../javadoc/2.1.0/index.html">JavaDoc 2.1.0</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../javadoc/2.0.2/index.html">JavaDoc 2.0.2</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../javadoc/2.0.0/index.html">JavaDoc 2.0.0</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../javadoc/1.0.0/index.html">JavaDoc 1.0.0</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="https://ikor.one/produkt/system-integration-platform">Find out more about IKOR</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="https://ikor.one/impressum/">Impressum</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">SIP Framework Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Core</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/IKOR-GmbH/sip-framework/edit/main/docs/core.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="sip-framework-core">SIP Framework Core<a class="headerlink" href="#sip-framework-core" title="Permanent link">&para;</a></h1>
<div class="toc">
<ul>
<li><a href="#sip-framework-core">SIP Framework Core</a><ul>
<li><a href="#description">Description</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#features">Features</a><ul>
<li><a href="#actuator-health-check-and-metrics">Actuator health check and metrics</a></li>
<li><a href="#adapter-lifecycle-manipulation-in-runtime">Adapter lifecycle manipulation in runtime</a></li>
<li><a href="#logging-translation">Logging Translation</a></li>
<li><a href="#changing-log-level-programmatically">Changing log level programmatically</a></li>
<li><a href="#tracing">Tracing</a></li>
<li><a href="#openapi-descriptor">OpenAPI Descriptor</a></li>
<li><a href="#sip-details-in-actuator-info-endpoint">SIP Details in actuator info endpoint</a></li>
<li><a href="#exception-handling">Exception handling</a></li>
<li><a href="#declarative-structure-in-actuator-adapter-definition-endpoint">Declarative Structure in actuator adapter definition endpoint</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h2 id="description">Description<a class="headerlink" href="#description" title="Permanent link">&para;</a></h2>
<p>Core project for base SIP functionalities</p>
<h2 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h2>
<p>To enable SIP Core features use @SIPIntegrationAdapter to annotate the Spring Boot entry class (no need to add @SpringBootApplication, it's included in the @SIPIntegrationAdapter)</p>
<h2 id="features">Features<a class="headerlink" href="#features" title="Permanent link">&para;</a></h2>
<h3 id="actuator-health-check-and-metrics">Actuator health check and metrics<a class="headerlink" href="#actuator-health-check-and-metrics" title="Permanent link">&para;</a></h3>
<p>SIP Core out-of-the-box information about health status of the adapter and the status of external systems with which it communicates.
 Provided checks are for HTTP(S), JMS and FTP (SFTP/FTPS) endpoints.</p>
<p>The health check functions will be executed periodically on a set interval and will only be available if actuator's
HealthEndpoint is enabled.</p>
<p>Actuator can be accessed from {base_url}/actuator</p>
<p>To enable/disable health calculation or set its execution interval the following configuration properties are available:</p>
<pre class="highlight"><code class="language-yaml">sip:
  core:
    metrics:
      external-endpoint-health-check:
        enabled: true
        scheduler:
          fixed-delay: 900000</code></pre>
<p>To customize health checks,
or introduce health checks for other kinds of components,
it is as simple as implementing the EndpointHealthConfigurer interface</p>
<pre class="highlight"><code class="language-java">@Configuration
public class EndpointMonitoringConfiguration {
    @Bean
    EndpointHealthConfigurer defaultHttpConfigurer() {
        return registry -&gt; registry.register("http*://**",
                HttpHealthIndicators::urlHealthIndicator);
    }
    @Bean
    EndpointHealthConfigurer ftpConfigurer() {
        return registry -&gt; registry.register("*ftp*://**",
                FtpHealthIndicators::noopHealthIndicator);
    }
    @Bean
    EndpointHealthConfigurer httpConfigurerById() {
        return registry -&gt; registry.registerById("processor_id",
                HttpHealthIndicators::urlHealthIndicator);
    }
}</code></pre>
<p>There are a few possible ways to register health check indicators and they will be used in the following priority:</p>
<ul>
<li>by using the id of processor, it will be registered as the exact endpoint URI</li>
<li>by using the exact endpoint URI as pattern</li>
<li>by using wildcards (*) in pattern, priority is based on how close they match the URI</li>
<li>default one for generic components</li>
</ul>
<p>If the same endpoint is used in more than one route,
meaning multiple processors with different ids have the same endpoint uri,
it is not possible to register 2 different health check functions (check important note below).
Only one function per endpoint is possible.</p>
<p><strong>Important</strong>: If same uri pattern is specified more than one time by any of these methods, DuplicateUriPatternError will be
thrown and application will not be able to start.</p>
<p><strong>Warning:</strong> Only one health indicator may exist for an exact endpoint URI.</p>
<p>It is worth noting that the HTTP(S) Health Check lists all existing HTTP(S) endpoints by default, but sets the status to UNKNOWN.
The reason for this is that for detected HTTP(S) endpoints a GET request is executed which may cause an unintended change of state
of the system to be invoked. Thus, for this behavior to not occur, health checks should be added explicitly.
To add an explicit Health Check for a URL it can be done in the following way.</p>
<pre class="highlight"><code class="language-java">@Bean
EndpointHealthConfigurer enableHttpHealthCheckForIKOR() {
  return registry -&gt; registry.register("https://www.ikor.de",
         HttpHealthIndicators::urlHealthIndicator);
}</code></pre>
<p>In case the URL https://ikor.one/kontakt/ is requested by the adapter, then on the one hand the explicit URL could be passed as
a parameter to <code>register()</code> or wildcards could be used to add a Health Check for this URL and at the same
time also matches https://ikor.one/karriere/. The passed argument to <code>register()</code> would look like this <code>https://www.ikor.one/**</code>.
However, HTTP(S) Health Checks can only be added for URLs that have also been detected in the adapter. In order to find out
what URLs have been discovered one could inspect the result of <code>{base_url}/actuator/health</code>.</p>
<p><strong>How to configure endpoint health checks:</strong></p>
<p>To inspect the health of Camel endpoints in an integration adapter, one needs to:</p>
<p>Make sure that this project uses sip-integration-starter maven dependency.
Instead of using @SpringBootApplication, use Java annotation @SIPIntegrationAdapter to annotate the Spring Boot entry class.
Configure the application actuator's Health endpoint to display details of health, as shown below.</p>
<p><em>All prerequisites from above are met if you create an integration adapter using SIP archetype.</em></p>
<p>Spring Boot Actuator:</p>
<pre class="highlight"><code class="language-yaml">#configuring health endpoint
management:
  endpoint:
    health:
      show-details: always #or when_authorized if security is in place</code></pre>
<p><strong>Health Status Gauge</strong></p>
<p>The calculated health status is also available as a gauge inside <code>/actuator/metrics</code>.
If all endpoints are healthy it returns 0, otherwise 1.
By default, it is named <code>sip.core.metrics.health</code>, but can be changed via configuration.</p>
<pre class="highlight"><code class="language-yaml">sip:
  core:
    metrics:
      gauge: "sip.core.metrics.health"</code></pre>
<h3 id="adapter-lifecycle-manipulation-in-runtime">Adapter lifecycle manipulation in runtime<a class="headerlink" href="#adapter-lifecycle-manipulation-in-runtime" title="Permanent link">&para;</a></h3>
<p>SIP Core provides a possibility to manipulate adapter lifecycle in runtime by controlling registered Camel routes.</p>
<p>All registered routes with basic info can be listed by using the following URI:</p>
<pre class="highlight"><code>GET /actuator/adapter-routes</code></pre>
<p>Getting only routes with sip middle component consumer (including all outbound connectors):</p>
<pre class="highlight"><code>GET /actuator/adapter-routes/sipmc</code></pre>
<p>More detailed info view for only one exact route can be seen by providing route id into following URI:</p>
<pre class="highlight"><code>GET /actuator/adapter-routes/{routeId}</code></pre>
<p>The following operations (case sensitive) can be executed per route, for all route or on sipmc:</p>
<ul>
<li>start</li>
<li>stop</li>
<li>suspend</li>
<li>resume</li>
<li>reset</li>
</ul>
<p>To execute an operation on all routes, use following URIs:</p>
<pre class="highlight"><code>POST /actuator/adapter-routes/{operation}</code></pre>
<p>There is a possibility to execute a route lifecycle operation on an exact route, by providing route id and operation.
This can be achieved by using following URI:</p>
<pre class="highlight"><code>POST /actuator/adapter-routes/{routeId}/{operation}</code></pre>
<p>It is also possible to execute desired operation on integration scenarios level via sip middle component. 
By specifying the operation in the following URI, 
it will be executed for all outgoing connectors inside the adapter, and any other consumer using sipmc:</p>
<pre class="highlight"><code>POST /actuator/adapter-routes/sipmc/{operation}</code></pre>
<p><strong>Warning:</strong>
When using suspend or stop operation on route that has middle component as a consumer, default value (30 seconds)
timeout will be used. Keep in mind that if route is not started for next 30 seconds after sending data to middle
component, data could be lost.</p>
<h3 id="logging-translation">Logging Translation<a class="headerlink" href="#logging-translation" title="Permanent link">&para;</a></h3>
<p>Adds possibility to translate log messages. This is achieved by using a custom logging encoder, which is able to translate log messages.</p>
<p>By default, translation service is not activated, thus in order to use it a logback.xml file should be provided in
resources. In this file we can specify that the adapter uses a custom logging encoder, which provides translations.</p>
<pre class="highlight"><code class="language-xml">&lt;appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender"&gt;
    &lt;!-- encoders are  by default assigned the type
         ch.qos.logback.classic.encoder.PatternLayoutEncoder --&gt;
    &lt;encoder class="de.ikor.sip.foundation.core.translate.logging.SIPPatternLayoutEncoder"&gt;
        &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36}: %msg%n&lt;/pattern&gt;
    &lt;/encoder&gt;
&lt;/appender&gt;</code></pre>
<p>Files for defining translation values should be created inside 'translations' directory as a bundle of .property files,
under a common name, which should be extended by a suffix in following format _{language}.</p>
<p>Each file consists of keys, shared in the bundle, followed by its value as a phrase in the language used.</p>
<p><strong>Warning:</strong>
Be mindful of how MessageFormat handles String. Some characters, like apostrophe ('),
are used as special characters and need to be escaped as shown in the example below.</p>
<p>More details can be found here: <a href="https://docs.oracle.com/javase/6/docs/api/java/text/MessageFormat.html">MessageFormat</a></p>
<pre class="highlight"><code class="language-properties">amessagekey = A message value
amessagekey.welcome_{} = Hello {0}
amessagekey.missingbean = Bean {0} doesn''t exist</code></pre>
<p>The keys are automatically recognized and should be used in logs.</p>
<pre class="highlight"><code class="language-java">log.info("amessagekey");
log.info("amessagekey.welcome_{}", "A user");</code></pre>
<p>It can also be automatically used by Camel's log processor. In this case message key MUST be separated from parameters by
blank space:</p>
<pre class="highlight"><code class="language-java">.log("amessagekey");
.log("amessagekey.welcome_{} ${header.userName}");</code></pre>
<p>Enabling, disabling and other settings can be done in the configuration.</p>
<pre class="highlight"><code class="language-yaml">sip:
  core:
    translation:
      fileLocations: classpath:translations/translated-messages, classpath:translations/messages
      default-encoding: "UTF-8"
      fallback-to-system-locale: false
      use-code-as-default-message: true
      lang: en</code></pre>
<h3 id="changing-log-level-programmatically">Changing log level programmatically<a class="headerlink" href="#changing-log-level-programmatically" title="Permanent link">&para;</a></h3>
<p>Actuator enables us to dynamically change log levels of all loggers during runtime.
This can be accomplished by using the following POST request:</p>
<pre class="highlight"><code>http://localhost:8080/actuator/loggers/{logger-name}
Header: Content-Type: application/json
Body: {
      "configuredLevel": "TRACE"
}</code></pre>
<p>Log levels can be independently changed and will be individually set per logger or on root.</p>
<p>We can also use logback.xml auto scan to update log levels.</p>
<p>Here we need to enable auto scan and set the interval on which it occurs in logback.xml configuration, and then we can
open logback.xml in target directory* and edit the log levels on loggers defined there.</p>
<pre class="highlight"><code class="language-xml">&lt;configuration scan="true" scanPeriod="30 seconds"/&gt;</code></pre>
<p>This works for all loggers except the ones on Camel routes.</p>
<h3 id="tracing">Tracing<a class="headerlink" href="#tracing" title="Permanent link">&para;</a></h3>
<p>SIP Core extends Camel's built-in Tracer for tracing and logging information about all processors
an exchange went through.
Configuration of the Tracer is enabled by adapting ExchangeFormatter.</p>
<p>Tracing functionality is set to false by default. In order to enable it, the following configuration should be added to
the application.yml:</p>
<pre class="highlight"><code class="language-yaml">sip:
  core:
    tracing:
      enabled: true</code></pre>
<p>Logging in console is enabled by default, but it can be turned off with <code>sip.core.tracing.log</code> property.</p>
<p>Configuring the ExchangeFormatter can be achieved through configuration file:</p>
<pre class="highlight"><code class="language-yaml">sip:
  core:
    tracing:
      enabled: true
      log: true
      exchange-formatter:
        multiline: true
        showHeaders: true
        showExchangeId: true
        showProperties: true
        maxChars: 100</code></pre>
<p>Exchanges will contain the "traceSet" header, which appears as a list of ordered exchange Ids,
appended based on EIP used in a route and separated by a coma. This allows to easily track the path of an message.</p>
<h3 id="openapi-descriptor">OpenAPI Descriptor<a class="headerlink" href="#openapi-descriptor" title="Permanent link">&para;</a></h3>
<p>Framework provides an Open API description of all custom, Camel's RestDSL or Spring provided endpoints within your adapter.
Endpoints are created as extension of Spring's actuator.</p>
<p>By using a sip-archetype code generator, you receive an adapter with a default setup for OpenAPI.</p>
<p>For working with Swagger OpenAPI, check their official <a href="https://swagger.io/tools/swagger-ui/">documentation</a>.</p>
<p><strong>Adding Custom Swagger Docs:</strong></p>
<p>SIP Framework provides a Swagger documentation for the actuator endpoints out of the box. In case a custom Swagger
documentation is needed it could be added by including the Swagger Apache Camel component. This component is only
supporting the REST DSL component. For controller classes annotated with <code>@RestController</code> an entry is added to the
default swagger docs. This might not be the expected behavior for which reason the <code>REST DSL</code> component is recommended.</p>
<p>The custom Swagger documentation could easily be added by defining it in the <code>restConfiguration</code> as seen in the
following listing.</p>
<pre class="highlight"><code class="language-java">restConfiguration()
  .contextPath("/adapter")
  .apiContextPath("/api-docs")
  .apiContextRouteId("api-docs");</code></pre>
<p>If the application has a route based on the REST DSL a Swagger documentation is generated automatically.</p>
<pre class="highlight"><code class="language-java">rest("/api/v1")
  .tag("Data Controller").description("REST service for creating new objects")
  .consumes(MediaType.APPLICATION_JSON_VALUE).produces(MediaType.APPLICATION_JSON_VALUE)
  .post("/data")
    .type(DataRequest.class)
    .description("Create a new object")
    .outType(DataResponse.class)
    .to("direct:handleRequest");</code></pre>
<p>This will create a new Swagger documentation for the REST service. For further information see the Apache Camel
documentation of the <a href="https://camel.apache.org/components/next/others/swagger-java.html">Swagger</a>
and <a href="https://camel.apache.org/manual/rest-dsl.html">REST DSL</a> component. In case the custom Swagger documentation
should be displayed by default in the Swagger UI you can configure it accordingly in the <code>application.yaml</code> file.</p>
<pre class="highlight"><code class="language-yaml">springdoc:
  show-actuator: true
  api-docs:
    path: /api-docs #default swagger docs
  swagger-ui:
    url: /adapter/api-docs #custom swagger docs set as default
    path: /swagger-ui.html</code></pre>
<p>Based on this configuration the custom Swagger documentation is accessible by <code>/adapter/api-docs</code>.</p>
<h3 id="sip-details-in-actuator-info-endpoint">SIP Details in actuator info endpoint<a class="headerlink" href="#sip-details-in-actuator-info-endpoint" title="Permanent link">&para;</a></h3>
<p>Under actuator endpoint <code>/actuator/info</code> there is basic information about the adapter (<code>adapter-name</code>, <code>adapter-version</code>,
<code>sip-framework-version</code>).
Additionally, there is also a list of all markdown files located in the adapter root directory, with their names and
content exposed.</p>
<p>By default, a mandatory <strong>build-info</strong> maven plugin is located in the <code>pom.xml</code> of adapter's application
module, which provides all basic information for this feature. We highly recommend using this plugin in your adapter!</p>
<p><strong>Warning about potential issue during development:</strong></p>
<p>There is one unpredictable problem with this feature that could happen only in your local environment and it
depends on IDE used for development. It is happening only after initial adapter generation and build/rebuild process
is executed after <code>mvn clean install</code> command.</p>
<p>Keep in mind that even if build and rebuild processes are not executed explicitly, simple running of the adapter could
execute them in the background, depending on IDE used.</p>
<p>Build/rebuild processes are deleting some generated sources. In our case build-info.properties which is used for
fetching adapter basic information is deleted.</p>
<p>The problem itself could be resolved by doing build/rebuild explicitly before <code>mvn clean install</code>.
Or for example in IntelliJ IDE by updating the specific settings:</p>
<p>Uncheck "Clear Output Directory On Rebuild" field which can be found under File -&gt; Settings -&gt;
Build, Execution, Deployment -&gt; Compiler. Keep in mind that this setup has to be done with every new adapter created
or new IntelliJ repository used.</p>
<p>Check the image and additional warning message by IntelliJ:</p>
<p>"WARNING!
If option 'Clear output directory on rebuild' is enabled, the entire contents of directories where generated sources
are stored WILL BE CLEARED on rebuild."</p>
<p><img alt="Image of SIP connected systems" src="./img/intellij_setting_clear_on_rebuild.png" title="IntelliJ rebuild settings" /></p>
<h3 id="exception-handling">Exception handling<a class="headerlink" href="#exception-handling" title="Permanent link">&para;</a></h3>
<p>SIP Framework offers a few types of exceptions. The base ones are:
- SIPFrameworkException - used for exceptions that may occur in the framework
- SIPAdapterException - used in adapter development, all custom exceptions should be extended from it
  - ModelValidationException - derived from SIPAdapterException, should be thrown for invalid models
  - ModelTransformationException - derived from SIPAdapterException, should be thrown for unsuccessful model transformation</p>
<p>If there is a need for additional exceptions it is highly encouraged that they have 
one of SIP base exceptions as parent class.
This provides uniformed data of exception origin for easier handling.</p>
<h3 id="declarative-structure-in-actuator-adapter-definition-endpoint">Declarative Structure in actuator adapter definition endpoint<a class="headerlink" href="#declarative-structure-in-actuator-adapter-definition-endpoint" title="Permanent link">&para;</a></h3>
<p>To see the detailed Declarative Structure of an adapter, containing all elements: <code>Integration Scenarios</code>, <code>Connectors</code> and 
<code>Connector groups</code>, there is a following endpoint exposed through actuator:</p>
<pre class="highlight"><code># all types
GET /adapterdefinition

# specific endpoints for each of the 3 types:
GET /adapterdefinition/scenarios
GET /adapterdefinition/connectors
GET /adapterdefinition/connectorgroups</code></pre>
<p>It will present a list of all Declarative Structure elements with details and relations between them.
Following details are presented:</p>
<ul>
<li>
<p><code>Connectors</code> - connector request and response data models, Camel routes, connector descriptions, and 
necessary information for creating 
<a href="https://ikor-gmbh.github.io/sip-framework/test-kit-declarative/">SIP Test Kit Declarative</a> tests.</p>
</li>
<li>
<p><code>Integration Scenarios</code> - contain common domain request and response models description.</p>
</li>
<li>
<p><code>Connector groups</code> - connectors belonging to that connector group </p>
</li>
</ul>
<p>To enable or disable this feature the following property should be used:</p>
<pre class="highlight"><code class="language-yaml">sip:
  core:
    actuator:
      adapterdefinition:
        enabled: true       # enabled by default</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../archetype/" class="btn btn-neutral float-left" title="Archetype"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../declarative/" class="btn btn-neutral float-right" title="Declarative Structure">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Â© Copyright 2021, <a href="https://ikor.one">IKOR GmbH</a> & contributors</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/IKOR-GmbH/sip-framework" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../archetype/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../declarative/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../javascript/javadoc_menu_dropdown.js"></script>
      <script src="../javascript/copy_to_clipboard.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
